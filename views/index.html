<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>Photo Sharing</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="{{ resolveURI("asset", "main.css") }}">
</head>

<body>
	<header>
		<h1>
			<b>Photo Sharing</b>
			<img src="{{ resolveURI("asset", "logo.jpg") }}" alt="">
		</h1>

		<article class="profile">
			<img src="{{ profile.avatar }}" alt="avatar">
			<b>{{ profile.name }}</b>
			<small>{{ profile.role }}</small>
			<a href="#profile">edit</a>
		</article>

		<a href="#upload">upload</a>
	</header>

	<main>
		<ol class="gallery">
			{% for entry in entries %}
			<li>
				<a href="{{ entry.source }}">
					<figure>
						<img src="{{ entry.image }}" alt="">
						<figcaption>{{ entry.caption }}</figcaption>
					</figure>
				</a>
				<community-likes data-id="photo-{{ entry.id }}">
					<form action="{{ resolveURI("photo", entry.id) }}" method="post">
						{% if entry.isLikedBy(currentUser) %}
							<input type="hidden" name="liked" value="0">
							<button><b>⭑</b></button>
						{% else %}
							<input type="hidden" name="liked" value="1">
							<button><b>⭒</b></button>
						{% endif %}
					</form>
					<var>{{ entry.likes.length }}</var>
				</community-likes>
			</li>
			{% endfor %}
		</ol>
	</main>

	<footer>
		© 2021
		<a href="https://github.com/FND/web-trigs-photo-sharing">Web Trigs community</a>
	</footer>

	<form id="upload">
		<fieldset>
			<legend>image upload</legend>
			<label>
				image
				<input type="file" name="image">
			</label>
			<label>
				title
				<input name="title">
			</label>
			<button>add</button>
		</fieldset>
	</form>

	<form id="profile">
		<fieldset>
			<legend>profile</legend>
			<label>
				name
				<input name="name">
			</label>
			<label>
				role, title or other nonsense
				<input name="role">
			</label>
			<label>
				avatar image
				<input type="file" name="avatar">
			</label>
			<button>save</button>
		</fieldset>
	</form>

	<script type="module" src="{{ resolveURI("asset", "elements/community-likes/index.js") }}" async></script>
</body>

</html>
